# Basic Pentesting

This walkthrough is for the [Basic Pentesting room](https://tryhackme.com/room/basicpentestingjt) from TryHackMe.

### Web App Testing and Privilge Escalation

1. Deploy the machine and connect to our network.

   Machine IP: 10.10.37.123

   > No answer needed

2. Find the services exposed by the machine.

   For this, I used nmap (Command: `nmap 10.10.37.123 -sV`). You can see the scan results [here](https://github.com/pamhrituc/TryHackMe_Writeups/blob/master/room_basic_pentest/results.log)

   > No answer needed

3. What is the name of the hidden directory on the web server(enter name without /)?

   To find hidden directories, I used gobuster (`gobuster dir -u http://10.10.37.123/ -w /usr/share/wordlists/dirbuster/directory-list-lowercase-2.3-medium.txt`). After letting it run for a while, it gave me the hidden directory I was looking for.

   ![screenshot_gobuster](/room_basic_pentest/screenshots/gobuster.png?raw=true)

   > development

4. User brute-forcing to find the username & password

   For this part, I used enum4linux. It comes preinstalled on Kali Linux, or it can be found [here](https://github.com/CiscoCXSecurity/enum4linux). Command: `enum4linux -a 10.10.37.123` (the -a flag for all simple enumeration; check `enum4linux -h` for more information on the options).

   ![screenshot_enum4linux](/room_basic_pentest/screenshots/enum4linux.png?raw=true)

   > No answer needed

5. What is the username

   > jan

6. What is the password?

   To find the password, I used hydra (`hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.37.123:22`), knowing the username (*jan*) for the SSH service (*port 22*).

   ![screenshot_hydra](/room_basic_pentest/screenshots/hydra.png?raw=true)

   > armando

7. What service do you use to access the server(answer in abbreviation in all caps)?

   > SSH

Now that we have the username and corresponding password for *jan*, I can log into the machine using SSH. (`ssh jan@10.10.37.123`)

8. Enumerate the machine to find any vectors for privilege escalation

   For this, I used Privilege Escalation Awesome Script or [PEAS](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/tree/master/linPEAS). I uploaded the *linpeas.sh* file to the server (`scp linpeas.sh jan@10.10.37.123:/tmp`, with jan's password) and ran the script.

   > No answer needed

9. What is the name of the other user you found(all lower case)?

   See question 4.

   > kay

10. If you have found another user, what can you do with this information?

    Using LinPEAS, one of the vectors for privesc that was found was kay's rsa private key, which can be used to access the machine using SSH.

   > No answer needed

11. What is the final password you obtain?

   Since we found kay's rsa private key, I attempted to use this file to log into the machine as kay. The attempt asked for a passphrase, which, with the help of johntheripper, I found.

   Commands to obtain passphrase:
   * `ssh2john.py kay_id_rsa > forjohn.txt`
   * `john forjohn.txt --wordlist=/usr/share/worlists/rockyou.txt`

   ![screenshot_john](/room_basic_pentest/screenshots/john.png?raw=true)

   After obtaining the passphrase, I was able to log in as kay using ssh (`ssh -i kay_id_rsa kay@10.10.37.123`) and read the file kay had in their home directory (*[ass.bak*)

   > heresareallystrongpasswordthatfollowsthepasswordpolicy$$
